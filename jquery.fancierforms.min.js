!function(t,e,n){function a(){t(".fancy.select").removeClass("open").children(".options").hide()}var i={LEFT:37,RIGHT:39,UP:38,DOWN:40,TAB:9,SPACE:32,ENTER:13,ESC:27},c={};String.format||(String.format=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})}),t(n).on("click",function(e){0===t(e.target).parents(".fancy.select").length&&a()}),t.fn.extend({fancifySelect:function(e){function n(e){var n="<div class='fancy select'>",i=e.val(),c=e.children("[value='"+i+"']");return n+=String.format("<span class='selected-value' data-value='{0}'>{1}</span><ul class='options' style='display: none;'>",c.val(),c.text()),e.children().each(function(){switch(this.tagName.toLowerCase()){case"option":n+=a(t(this));break;case"optgroup":var e=t(this),i=e.attr("label");n+=String.format("<li class='group{1}'><span class='group-label'>{0}</span><ul>",i?i:"&nbsp;",e.is(":disabled")?" disabled":""),e.children().each(function(){n+=a(t(this))}),n+="</ul></li>"}}),n+="</ul></div>"}function a(t,e){var n=t.val();return String.format("<li class='option{2}' data-value='{0}'>{1}</li>",n,t.text(),n===e?" selected":"")}function o(t){r(t),s(t.next(".fancy.select"))}function r(e){e.on("focus",function(){var e=t(this),n=c[e.attr("id")];"undefined"==typeof n?u(e):clearTimeout(n)}),e.on("blur",function(){var e=t(this);c[e.attr("id")]=setTimeout(function(){delete c[e.attr("id")],l(e)},m.blurTimeout)}),e.on("change",function(){d(t(this))}),e.on("keydown",function(e){(e.which===i.ESC||e.which===i.ENTER)&&h(t(this).next(".fancy.select"))})}function s(e){e.on("click",function(){t(this).prev("select").trigger("focus")}),e.on("click",".selected-value",function(){var e=t(this).parent();e.hasClass("open")?h(e):f(e)}),e.on("click",".option",function(){_selectedOption=t(this),0===_selectedOption.parents(".group.disabled").length&&(v(_selectedOption),h(_selectedOption.parents(".fancy.select")))})}function u(t){t.next(".fancy.select").addClass("focused")}function l(t){var e=t.next(".fancy.select");h(e),e.removeClass("focused")}function d(t){var e=t.val(),n=t.find("option[value='"+e+"']");t.next(".fancy.select").children(".selected-value").text(n.text()).attr("data-value",e).next(".options").find(".option").removeClass("selected").filter("[data-value='"+e+"']").addClass("selected")}function f(t){t.addClass("open").children(".options").show()}function h(t){t.removeClass("open").children(".options").hide()}function v(t){t.parents(".fancy.select").prev("select").val(t.attr("data-value")).trigger("change")}var p={blurTimeout:150},m=t.extend(!0,{},p,e);return this.filter("select").each(function(){var e=t(this);e.addClass("hidden").after(n(e)).attr("size",e.find("option").size()),o(e)})},fancifyRadio:function(e){function n(t){return String.format("<div class='fancy radio' data-name='{0}' data-value='{1}'></div>",t.attr("name"),t.val())}function a(t){i(t),o(t.next(".fancy.radio"))}function i(e){e.on("focus",function(){var e=t(this),n=c[e.attr("id")];"undefined"==typeof n?r(e):clearTimeout(n)}),e.on("blur",function(){var e=t(this);c[e.attr("id")]=setTimeout(function(){delete c[e.attr("id")],s(e)},f.blurTimeout)}),e.on("change",function(){u(t(this))})}function o(e){e.on("click",function(){l(t(this))})}function r(t){t.next(".fancy.radio").addClass("focused")}function s(t){t.next(".fancy.radio").removeClass("focused")}function u(e){var n=e.attr("name");t(".fancy.radio[data-name='"+n+"']").removeClass("selected"),e.next(".fancy.radio").addClass("selected").attr("data-name",n).attr("data-value",e.val())}function l(e){var n=e.attr("data-name"),a=e.prev("input:radio");a.trigger("focus"),t("input:radio[name='"+n+"']").attr("checked",!1),a.get(0).checked=!0,a.trigger("change")}var d={blurTimeout:150},f=t.extend(!0,{},d,e);return this.filter("input:radio").each(function(){var e=t(this);e.addClass("hidden").after(n(e)),a(e)})},fancifyCheckbox:function(e){function n(t){return String.format("<div class='fancy checkbox' data-name='{0}' data-value='{1}'></div>",t.attr("name"),t.val())}function a(t){i(t),o(t.next(".fancy.checkbox"))}function i(e){e.on("focus",function(){var e=t(this),n=c[e.attr("id")];"undefined"==typeof n?r(e):clearTimeout(n)}),e.on("blur",function(){var e=t(this);c[e.attr("id")]=setTimeout(function(){delete c[e.attr("id")],s(e)},f.blurTimeout)}),e.on("change",function(){u(t(this))})}function o(e){e.on("click",function(){l(t(this))})}function r(t){t.next(".fancy.checkbox").addClass("focused")}function s(t){t.next(".fancy.checkbox").removeClass("focused")}function u(t){var e=t.next(".fancy.checkbox");t.get(0).checked?e.addClass("selected"):e.removeClass("selected")}function l(t){var e=t.prev("input:checkbox"),n=e.get(0);e.trigger("focus"),n.checked=!n.checked,e.trigger("change")}var d={blurTimeout:150},f=t.extend(!0,{},d,e);return this.filter("input:checkbox").each(function(){var e=t(this);e.addClass("hidden").after(n(e)),a(e)})}})}(jQuery,window,document);