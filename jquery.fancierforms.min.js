!function(e){String.format||(String.format=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,n){return"undefined"!=typeof t[n]?t[n]:e})});var t={LEFT:37,RIGHT:39,UP:38,DOWN:40,TAB:9,SPACE:32,ENTER:13,ESC:27},n={};e.fn.extend({fancifySelect:function(a){function c(t){var n="<div class='fancy select'>",a=t.val(),c=t.children("[value='"+a+"']");return n+=String.format("<span class='selected-value' data-value='{0}'>{1}</span><ul class='options' style='display: none;'>",c.val(),c.text()),t.children().each(function(){var t=e(this),c=t.val();n+=String.format("<li{2} data-value='{0}'>{1}</li>",t.val(),t.text(),c===a?" class='selected'":"")}),n+="</ul></div>"}function i(e){o(e),r(e.next(".fancy.select"))}function o(a){a.on("focus",function(){var t=e(this),a=n[t.attr("id")];"undefined"==typeof a?s(t):clearTimeout(a)}),a.on("blur",function(){var t=e(this);n[t.attr("id")]=setTimeout(function(){delete n[t.attr("id")],u(t)},p.blurTimeout)}),a.on("change",function(){d(e(this))}),a.on("keydown",function(e){e.which===t.ESC&&v()})}function r(t){t.on("click",".selected-value",function(){var t=e(this).parent();t.hasClass("open")?f(t):l(t)}),t.on("click","li",function(){_selectedOption=e(this),h(_selectedOption),f(_selectedOption.parents(".fancy.select"))})}function s(e){e.next(".fancy.select").addClass("focused")}function u(e){v(),e.next(".fancy.select").removeClass("focused")}function d(e){var t=e.val(),n=e.children("[value='"+t+"']");e.next(".fancy.select").children(".selected-value").text(n.text()).attr("data-value",t).next(".options").children().removeClass("selected").filter("[data-value='"+t+"']").addClass("selected")}function l(e){v(),e.addClass("open").children(".options").show(),e.prev("select").trigger("focus")}function f(e){e.removeClass("open").children(".options").hide(),e.prev("select").trigger("focus")}function v(){e(".fancy.select").removeClass("open").children(".options").hide()}function h(e){e.parents(".fancy.select").prev("select").val(e.attr("data-value")).trigger("change")}var m={blurTimeout:150},p=e.extend(!0,{},m,a);return this.filter("select").each(function(){var t=e(this);t.addClass("hidden").after(c(t)),i(t)})},fancifyRadio:function(t){function a(e){return String.format("<div class='fancy radio' data-name='{0}' data-value='{1}'></div>",e.attr("name"),e.val())}function c(e){i(e),o(e.next(".fancy.radio"))}function i(t){t.on("focus",function(){var t=e(this),a=n[t.attr("id")];"undefined"==typeof a?r(t):clearTimeout(a)}),t.on("blur",function(){var t=e(this);n[t.attr("id")]=setTimeout(function(){delete n[t.attr("id")],s(t)},f.blurTimeout)}),t.on("change",function(){u(e(this))})}function o(t){t.on("click",function(){d(e(this))})}function r(e){e.next(".fancy.radio").addClass("focused")}function s(e){e.next(".fancy.radio").removeClass("focused")}function u(t){var n=t.attr("name");e(".fancy.radio[data-name='"+n+"']").removeClass("selected"),t.next(".fancy.radio").addClass("selected").attr("data-name",n).attr("data-value",t.val())}function d(t){var n=t.attr("data-name"),a=t.prev("input:radio");a.trigger("focus"),e("input:radio[name='"+n+"']").attr("checked",!1),a.get(0).checked=!0,a.trigger("change")}var l={blurTimeout:150},f=e.extend(!0,{},l,t);return this.filter("input:radio").each(function(){var t=e(this);t.addClass("hidden").after(a(t)),c(t)})},fancifyCheckbox:function(t){function a(e){return String.format("<div class='fancy checkbox' data-name='{0}' data-value='{1}'></div>",e.attr("name"),e.val())}function c(e){i(e),o(e.next(".fancy.checkbox"))}function i(t){t.on("focus",function(){var t=e(this),a=n[t.attr("id")];"undefined"==typeof a?r(t):clearTimeout(a)}),t.on("blur",function(){var t=e(this);n[t.attr("id")]=setTimeout(function(){delete n[t.attr("id")],s(t)},f.blurTimeout)}),t.on("change",function(){u(e(this))})}function o(t){t.on("click",function(){d(e(this))})}function r(e){e.next(".fancy.checkbox").addClass("focused")}function s(e){e.next(".fancy.checkbox").removeClass("focused")}function u(e){var t=e.next(".fancy.checkbox");e.get(0).checked?t.addClass("selected"):t.removeClass("selected")}function d(e){var t=e.prev("input:checkbox"),n=t.get(0);t.trigger("focus"),n.checked=!n.checked,t.trigger("change")}var l={blurTimeout:150},f=e.extend(!0,{},l,t);return this.filter("input:checkbox").each(function(){var t=e(this);t.addClass("hidden").after(a(t)),c(t)})}})}(jQuery,window,document);